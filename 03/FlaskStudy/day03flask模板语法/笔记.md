# 模板：（网页）

## 在模板中获取view中传递的变量值：{{ }}

`render_template('模板名字',key=value,key=value)`

> **模板中要获取的数据不存在,不会报错**

### 模板 列表,字典,对象都能通过 . 获取值

```jinja2
{{ list.0 }}    同 {{ list[0] }}
{{ dict.key }}  同 {{ dict.get(key) }}
{{ girl.name }} 同 {{ 对象.属性 }}
```

```python
class Girl:
    def __init__(self, name, addr):
        self.name = name
        self.gender = '女'
        self.addr = addr

    def __str__(self):
        return self.name


@app.route('/')
def show():
    name = '沈凯'  # str
    age = 18  # int
    friends = ['小明', '小红', 'Tom', 'Jerry']  # list
    dict1 = {'gift0': '止痛药', 'gift1': '安眠药', 'gift2': '麻醉剂'}  # dict
    # 创建对象
    girlfriend = Girl('叶子', '地狱')
    return render_template('show.html', name=name, age=age, gender='futa', friends=friends, dict1=dict1, girl=girlfriend)
```

```jinja2
<p>
    用户名是：{{ name }} -- {{ age }} ---{{ gender }}
    <br>
    {# 列表 #}
    {{ friends.0 }} --- {{ friends[1] }} --- {{ friends[4] }}   {# friends[4] 不存在,但是不会报错 #}
    <br>
    {# 字典 #}
    {{ dict1.get('gift0') }} --- {{ dict1.gift1 }}
    <br>
    {# 对象 #}
    {{ girl.gender }} -- {{ girl.name }} -- {{ girl.addr }}
</p>
```



### 控制快: {% %}

```jinja2
{% if  条件 %}

{% endif %}
--------------------------------

{% if  条件 %}
     条件为True
{% else %}
     条件为False
{% endif %}
--------------------------------

{% for 变量 in 可迭代的对象 %}
    for循环要做的任务
{% endfor %}
--------------------------------

可以使用loop变量
{% loop.index %}   序号从1开始
{% loop.index0 %}  序号从0开始
--------------------------------

{% loop.revindex %}  reverse  序号是倒着的
{% loop.revindex0 %}
--------------------------------

{% loop.first %} 布尔类型   是否是第一行
{% loop.last %}  布尔类型   是否是第二行
```



## 过滤器 {{ }}

> 过滤器的本质就是函数

模板语法中过滤器：

```jinja2
{{ 变量名 | 过滤器(*args) }}
{{ 变量名 | 过滤器 }}
```

> 常见的过滤器：

- safe ： 禁用转译

    ```python
    msg = '<h1>520快乐！</h1>'
    return render_template('show_2.html', girls=girls, users=users, msg=msg)
    
    不想让其转译：
    {{ msg | safe }}
    ```

- capitalize：单词的首字母大写

    ```jinja2
    {{ n1 | capitalize }}
    ```

- lower和upper 大小写的转换
  
- title 一句话中每个单词的首字母大写

    ```jinja2
    msg = 'She is a beautiful girl'
    {{ msg | title}}
    ```

- reverse  翻转

    ```jinja2
    {{ n1 | reverse}}
    ```

- format 

    ```jinja2
    {{ '%s is %d years old' | format('lily',18) }}
    ```

- 7.truncate 字符串截断

## list的操作 {# #}

```jinja2
{# 列表过滤器的使用 #}
{{ girls | first }}<br>
{{ girls | last }}<br>
{{ girls | length }}<br>

{#{{ girls | sum }} 整型的计算 #}
{{ [1,3,5,7,9] | sum }}<br>
{{ [1,8,5,7,3] | sort }}<br>
```

## dict: {% %}

```jinja2
{% for v in users.0.values() %}   ---->获取值
	<p>{{ v }}</p>
{% endfor %}

{% for k in users.0.keys() %}     ----》获取键
    <p>{{ k }}</p>
{% endfor %}

{% for k,v in users.0.items() %}  ---》获取键值
    <p>{{ k }}---{{ v }}</p>
{% endfor %}
```













